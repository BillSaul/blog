---
title: Debian12 升级 Debian13 过程记录
author:
  name: 薄荷屋
  url: https://www.meowpass.com
category:
  - 随笔
tag:
  - Linux
date: 2025-12-15 20:04:12
permalink: /pages/20b63e/
---



## 1. 前言

官方有一份很详细的[升级手册](https://www.debian.org/releases/trixie/release-notes/upgrading.zh_CN.html)，但是官方这份手册写的太详细了，里面有很多不必要的章节和步骤，所以我在升级之后，整理了一下我的升级过程，总结一下。

## 2. 升级前准备

### 2.1 备份

升级之前，当然是 **备份！备份！备份！** 用你自己习惯的方式来备份系统，我使用的是PVE创建的Debian虚拟机，所以我直接创建一个虚拟机快照就结束了。

### 2.2 升级系统软件

把当前 Debian12 系统的软件升级到最新

```bash
sudo apt update
sudo apt full-upgrade
sudo apt autoremove
```

### 2.3 检查非 Debian 软件包

检查你配置的非 Debian 软件包是否支持 Debian13 (trixie)，使用命令查看所有软件源：

```bash
apt-cache policy
```

命令会列出系统中所有生效的源，自行检查其中的第三方源是否支持 Debian13，如果支持，则改成 Debian13 的镜像源。我系统中只添加了 Docker 的三方镜像源，且已支持 Debian13。

### 2.4 移除过时的软件包（可选）

> 引用：[过时的软件包](https://www.debian.org/releases/trixie/release-notes/upgrading.zh_CN.html#obsolete)

> [!WARNING]
>
> 注意仔细检查列出的包中，是否存在需要使用的软件包，避免删除之后，影响正常使用。

列出过时的软件包：

```bash
sudo apt list '?obsolete'
```

清理过时的软件包：

```bash
sudo apt purge '?obsolete'
```

### 2.5 清理已删除的软件包（可选）

> 引用：[清理已删除的软件包](https://www.debian.org/releases/trixie/release-notes/upgrading.zh_CN.html#purging-removed-packages)

显示所有已删除、但可能在系统上留下配置文件的软件包的列表：

```bash
sudo apt list '?config-files'
```

可以使用 `apt purge` 删除这些软件包，或者用以下命令一次性清除它们：

```bash
sudo apt purge '?config-files'
```

## 3. 修改软件源为 Debian 13 (trixie)

编辑 `/etc/apt/sources.list` 文件，把里面所有的 `bookworm` 改成 `trixie`

## 4. 开始升级

### 4.1 更新软件包列表

> 引用：[更新软件包列表](https://www.debian.org/releases/trixie/release-notes/upgrading.zh_CN.html#updating-the-package-list)

```bash
sudo apt update
```

### 4.2 最小系统升级

> [最小系统升级](https://www.debian.org/releases/trixie/release-notes/upgrading.zh_CN.html#minimal-system-upgrade)

在某些情况下，直接执行 `apt full-upgrade` 可能会移除大量你需要保留的软件包。因此，建议采用分两步的升级流程：

```bash
apt upgrade --without-new-pkgs
```

### 4.3 升级系统

完成上述步骤之后，继续升级主要部分：

```bash
sudo apt full-upgrade
```

等待升级完成，然后重启系统：
```bash
sudo reboot
```

## 5. 升级之后清理工作

清理不需要的软件包

```bash
sudo apt autoremove
sudo apt autoclean
```

可选：

- [移除过时的软件包](#_2-4-移除过时的软件包-可选)
- [清理已删除的软件包](#_2-5-清理已删除的软件包-可选)
