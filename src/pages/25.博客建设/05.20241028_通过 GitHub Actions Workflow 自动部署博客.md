---
title: é€šè¿‡ GitHub Actions Workflow è‡ªåŠ¨éƒ¨ç½²åšå®¢
author:
  name: è–„è·å±‹
  url: https://www.meowpass.com
category:
  - åšå®¢å»ºè®¾æ—¥å¿—
tag:
  - åšå®¢
date: 2024-10-28 20:54:10
permalink: /pages/ce052f/
---



## 1. å‰è¨€

é¦–å…ˆè¯´ä¸€ä¸‹æˆ‘åšå®¢çš„éƒ¨ç½²æ–¹å¼ä¸º è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨ + CDNï¼Œåšå®¢æºç åœ¨GitHubã€‚æ‰€ä»¥æ­¤æ–‡ç« ä¸ä¸€å®šé€‚åˆæ‰€æœ‰äººã€‚

<!-- more -->

## 2. ä¸ºä»“åº“æ·»åŠ  secrets

![](/assets/page-img/2024/20241028/1.webp)

æ·»åŠ å››ä¸ª secrets

- `SECRETID`ï¼šä»è…¾è®¯äº‘ç”³è¯·åˆ°çš„ secret IDã€‚
- `SECRETKEY`ï¼šä»è…¾è®¯äº‘ç”³è¯·åˆ°çš„ secret keyã€‚
- `BUCKET`ï¼šå­˜å‚¨æ¡¶åç§°ã€‚
- `REGION`ï¼šå­˜å‚¨æ¡¶åœ°åŸŸã€‚

è¯¦ç»†è¯´æ˜å¯æŸ¥çœ‹ [å®˜æ–¹æ–‡æ¡£](https://cloud.tencent.com/document/product/436/63679#.E5.91.BD.E4.BB.A4.E6.A0.BC.E5.BC.8F)

## 3. åˆ›å»º workflows æ–‡ä»¶

åœ¨é¡¹ç›® `.github/workflows/` æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶ `main.yml`ï¼š

```
name: Deploy blog ğŸš€
on: [push]
jobs:
  Deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install COSCLI
        run: |
          wget https://cosbrowser.cloud.tencent.com/software/coscli/coscli-linux-amd64
          mv coscli-linux-amd64 coscli
          chmod 755 coscli
      - name: Configure COSCLI
        env:
          SECRET_ID: ${{ secrets.SECRETID }}
          SECRET_KEY: ${{ secrets.SECRETKEY }}
          BUCKET: ${{ secrets.BUCKET }}
          REGION: ${{ secrets.REGION }}
        run: |
          ./coscli config add -b $BUCKET -r $REGION -a bucket1
          ./coscli config set --secret_id $SECRET_ID --secret_key $SECRET_KEY
      - name: Build
        run: |
          npm install -g pnpm
          pnpm install
          pnpm run docs:build
      - name: Upload
        run: ./coscli sync -r --delete --force ./src/.vuepress/dist/ cos://bucket1/
```

è¯¦ç»†è¯­æ³•å¯æŸ¥çœ‹ [å®˜æ–¹æ–‡æ¡£](https://docs.github.com/zh/actions/writing-workflows/workflow-syntax-for-github-actions)

## 4. ä½¿ç”¨

å®Œæˆä¸Šè¿°æ­¥éª¤ä¹‹åï¼Œå°†ä»£ç æ¨é€åˆ° GitHubã€‚ç„¶åæŸ¥çœ‹æ‰§è¡Œç»“æœ

![](/assets/page-img/2024/20241028/2.webp)